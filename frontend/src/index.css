@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  background: #020617; /* Midnight Slate */
  color: #fff;
}

/* Mood Backgrounds */
.mood-neutral {
  background: radial-gradient(circle at 50% 40%, #1e293b 0%, #020617 80%);
}

.mood-happy {
  background: linear-gradient(120deg,#f0f9ff 0%,#e6fffa 50%,#fff7ed 100%);
}

.mood-sleepy {
  background: linear-gradient(180deg, #0f172a 0%, #020617 40%);
}

.mood-storm {
  background: linear-gradient(180deg, #0b1220 0%, #05060a 60%);
}

.mood-grow {
  background: linear-gradient(135deg, #ffedd5 0%, #fef3c7 50%, #eafff0 100%);
}

/* Overlay to soften transitions */
.mood-overlay {
  position: absolute;
  inset: 0;
  mix-blend-mode: overlay;
  opacity: 0.35;
  pointer-events: none;
}
.mood-neutral .mood-overlay { background: linear-gradient(transparent, rgba(0,0,0,0.35)); }
.mood-happy .mood-overlay  { background: linear-gradient(transparent, rgba(255,255,255,0.06)); }
.mood-sleepy .mood-overlay { background: linear-gradient(rgba(5,10,20,0.1), rgba(0,0,0,0.6)); }
.mood-storm .mood-overlay { background: linear-gradient(rgba(10,10,20,0.6), rgba(0,0,0,0.8)); }
.mood-grow .mood-overlay { background: linear-gradient(transparent, rgba(255,230,200,0.04)); }

/* Clouds */
.clouds { position:absolute; inset:6% 0 72%; pointer-events: none; z-index: auto }
.cloud { background: rgba(255,255,255,0.08); height: 120px; width: 320px; border-radius: 50%; position:absolute; filter: blur(18px); }
.cloud.c1 { top: 10%; left: -20%; transform: scale(1.1); animation: cloudMove 30s linear infinite; }
.cloud.c1 { top: 6%; left: -40%; transform: scale(1.25); animation: cloudMove 22s linear infinite; }
.cloud.c2 { top: 16%; left: 10%; transform: scale(1.05); animation: cloudMove 18s linear infinite reverse; }
.cloud.c3 { top: 2%; left: 50%; transform: scale(1.6); animation: cloudMove 32s linear infinite; }
.cloud.c4 { top: 8%; left: 30%; transform: scale(2.2); animation: cloudMove 52s linear infinite; }

@keyframes cloudMove { from { transform: translateX(-20%) } to { transform: translateX(120%) } }

/* Rain - multiple lines using background */
.rain { position:absolute; inset:0; background-image: linear-gradient(transparent, rgba(255,255,255,0.02) 20%, transparent 40%); pointer-events: none; }
.mood-storm .rain { background-image: repeating-linear-gradient(transparent 0 2px, rgba(255,255,255,0.06) 3px 4px); background-size: 6px 24px; animation: rainFall 0.18s linear infinite; opacity: 0.9 }
@keyframes rainFall { from { background-position: 0 -10px } to { background-position: 0 40px } }

/* Lightning flash */
.lightning { position:absolute; inset:0; pointer-events: none; animation: lightning 7s linear infinite; opacity:0 }
@keyframes lightning {
  0% { opacity: 0 }
  92% { opacity: 0 }
  93% { opacity: 0.9; filter: blur(8px) }
  95% { opacity: 0 }
}

/* Stars for sleepy */
.stars { position:absolute; inset:0; opacity:0.9; pointer-events:none }
.star { position:absolute; width:3px; height:3px; background: rgba(255,255,255,0.85); border-radius:50%; box-shadow: 0 0 10px rgba(255,255,255,0.3); animation: twinkle 3s ease-in-out infinite; }
@keyframes twinkle { 0% { opacity: 0.4 } 50% { opacity: 1 } 100% { opacity: 0.4 } }

/* Glow for happy/grow */
.glow { position:absolute; inset:auto; left:20%; top:10%; width:60%; height:60%; border-radius: 50%; filter: blur(60px); pointer-events:none; opacity: 0.6 }
.mood-happy .glow { background: radial-gradient(circle at center, rgba(255,255,255,0.7), rgba(74,222,128,0.08) 40%, transparent 60%); }
.mood-grow .glow { background: radial-gradient(circle at center, rgba(255,200,100,0.35), rgba(255,150,50,0.06) 40%, transparent 60%); }

/* Helper: hide clouds/raindrops when not storm/happy */
.mood-storm .clouds, .mood-storm .rain, .mood-storm .lightning { visibility: visible; opacity: 1; filter: contrast(0.75) brightness(0.95); }
.mood-happy .clouds { visibility: visible; opacity: 1; }
.mood-storm .cloud { background: rgba(255,255,255,0.14); filter: blur(16px); }
.mood-happy .cloud { background: rgba(255,255,255,0.12); filter: blur(12px); }
/* bring some lightning muzzle */
.mood-storm .lightning { filter: drop-shadow(0 0 40px rgba(255,255,255,0.95)); }
.mood-sleepy .stars { visibility: visible; opacity: 1; }
.mood-neutral .clouds, .mood-neutral .rain, .mood-neutral .stars, .mood-neutral .lightning, .mood-neutral .glow { opacity: 0; visibility:hidden }

/* Hearts (Happy) */
.hearts { position:absolute; inset:auto; left:0; right:0; top:6%; bottom:auto; height:50%; pointer-events:none; overflow:visible; opacity: 0; visibility: hidden; }
.heart { position:absolute; width:18px; height:18px; transform: translateY(0) rotate(45deg); background: #ff6b8a; border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); opacity:0; animation: heartRise 3.6s ease-in-out infinite both; animation-play-state: paused; }
.heart::before, .heart::after { content: ''; position:absolute; width:18px; height:18px; background: #ff6b8a; border-radius: 50%; }
.heart::before { top:-9px; left:0; }
.heart::after { left:9px; top:0; }
@keyframes heartRise { 0% { transform: translateY(0) rotate(45deg); opacity: 0 } 10% { opacity: 1 } 80% { opacity: 0.9 } 100% { transform: translateY(-190px) rotate(55deg); opacity: 0 } }
.mood-happy .hearts { opacity: 1; visibility: visible }
.mood-happy .heart { animation-play-state: running }
.mood-neutral .heart { opacity: 0; visibility:hidden; animation-play-state: paused }

/* Ensure hearts are hidden for non-happy moods */
.mood-storm .hearts, .mood-sleepy .hearts, .mood-grow .hearts { opacity: 0; visibility: hidden; }
.mood-storm .heart { display: none !important; }

/* Confetti (Dance/Happy) */
.confetti { position:absolute; inset:0; pointer-events:none; overflow:hidden ; opacity: 0; visibility: hidden }
.confetti-piece { width:10px; height:18px; background: #ffd166; position:absolute; top:-6%; transform-origin: center; border-radius: 2px; opacity:0; animation: confettiFall 2.2s linear infinite both }
.confetti-piece:nth-child(2n) { background: #06d6a0 }
.confetti-piece:nth-child(3n) { background: #ef476f }
.confetti-piece:nth-child(5n) { background: #118ab2 }
@keyframes confettiFall { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 1 } 100% { transform: translateY(110vh) rotate(540deg); opacity: 1 } }
.mood-happy .confetti { opacity: 1; visibility: visible }
.mood-neutral .confetti { opacity: 0; visibility: hidden }
.mood-storm .confetti, .mood-sleepy .confetti, .mood-grow .confetti { opacity: 0; visibility: hidden }
.mood-storm .confetti-piece { display: none !important; }

/* Sprouts (Grow) */
.sprouts { position:absolute; left:0; right:0; bottom:10%; height:120px; pointer-events:none; opacity: 0; visibility: hidden }
.sprout { position:absolute; bottom:12%; transform-origin: center bottom; opacity:0; animation: sproutGrow 2s ease forwards; }
.sprout svg path { stroke-width: 2px; stroke-linecap: round; stroke-linejoin: round; }
@keyframes sproutGrow { 0% { transform: scale(0.04) translateY(6px); opacity: 0 } 45% { transform: scale(0.85) translateY(0); opacity: 0.9 } 100% { transform: scale(1) translateY(0); opacity: 1 } }
.mood-grow .sprouts { opacity: 1; visibility: visible }
.mood-neutral .sprouts { opacity: 0; visibility: hidden }
.mood-storm .sprouts, .mood-happy .sprouts, .mood-sleepy .sprouts { opacity: 0; visibility: hidden }

/* Moon & Zzz (Sleepy) */
.moon { position: absolute; top: 10%; right: 8%; width: 120px; height: 120px; opacity: 0; pointer-events:none; visibility: hidden }
.crescent { width:100%; height:100%; border-radius:50%; background: rgba(255,255,255,0.95); clip-path: inset(0 35% 0 0 round 999px); transform: rotate(-10deg); filter: blur(0.5px) }
.zzz { position: absolute; left: -26%; top: 55%; display:flex; gap:4px; opacity:0 }
.zzz span { font-weight: 700; font-size: 22px; color: rgba(255,255,255,0.85); transform: translateY(0); animation: zFloat 2.8s ease-in-out infinite; opacity:0 }
.zzz span:nth-child(1) { animation-delay: 0.1s } .zzz span:nth-child(2) { animation-delay: 0.6s } .zzz span:nth-child(3) { animation-delay: 1.1s }
@keyframes zFloat { 0% { transform: translateY(0); opacity: 0 } 30% { opacity: 0.9 } 100% { transform: translateY(-96px); opacity: 0 } }
.mood-sleepy .moon { opacity: 1; visibility: visible }
.mood-sleepy .zzz { opacity: 1; visibility: visible }
.mood-storm .moon, .mood-happy .moon, .mood-grow .moon { opacity: 0; visibility: hidden }

/* Ensure neutral hides most extras */
.mood-neutral .hearts, .mood-neutral .confetti, .mood-neutral .sprouts, .mood-neutral .moon { opacity: 0; visibility: hidden }

/* Transition and fading */
.mood-neutral, .mood-happy, .mood-sleepy, .mood-storm, .mood-grow { transition: background 0.6s ease, opacity 0.4s ease; }
.clouds, .rain, .lightning, .glow, .stars { transition: opacity 0.4s ease, visibility 0.2s; }

/* Position random stars */
.stars .star { animation-duration: 2.5s; }
.stars .star:nth-child(odd) { animation-duration: 3.5s }
.stars .star:nth-child(3n) { animation-duration: 4s }
/* Random location for stars */
.stars .star:nth-child(1) { left: 10%; top: 20% }
.stars .star:nth-child(2) { left: 20%; top: 90% }
.stars .star:nth-child(3) { left: 16%; top: 45% }
.stars .star:nth-child(4) { left: 40%; top: 10% }
.stars .star:nth-child(5) { left: 60%; top: 80% }
.stars .star:nth-child(6) { left: 72%; top: 55% }
.stars .star:nth-child(7) { left: 84%; top: 30% }
.stars .star:nth-child(8) { left: 46%; top: 63% }
.stars .star:nth-child(9) { left: 30%; top: 25% }
.stars .star:nth-child(10) { left: 80%; top: 10% }
.stars .star:nth-child(n+11) { left: calc(5% + (70% * var(--i))); top: calc(5% + (80% * var(--j))); }
